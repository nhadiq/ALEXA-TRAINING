<!DOCTYPE html>
<!-- saved from url=(0035)https://avs-sdk-workshop.github.io/ -->
<html class="gr__avs-sdk-workshop_github_io"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>AVS Workshop @ reInvent 2018</title>
  
  <meta name="description" content="Documentation website">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="./Alexa Skill development workshop/css" rel="stylesheet" type="text/css">
  <link href="./Alexa Skill development workshop/assets.css" rel="stylesheet" type="text/css">
  <link href="./Alexa Skill development workshop/avs.css" rel="stylesheet" type="text/css">
</head>
<body data-gr-c-s-loaded="true">
  <nav id="sidebar">
	<h1>Alexa Skill Development workshop</h1>
<ul id="links">
  
    
    <li><a href="#/1-setup-your-pi">1. Setup Your Pi</a></li>
    
  
    
    <li><a href="#/2-get-dev-account">2. Get an Amazon Dev Account</a></li>
    
  
    
    <li><a href="#/3-create-device-security-profile">3. Create a Device &amp; Security Profile</a></li>
    
  
    
    <li><a href="#/5-copy-credentials">4. Input Your Credentials</a></li>
    
  
    
    <li><a href="#/6-run-install-script">5. Run the Install Script</a></li>
    
  
    
    <li><a href="#/6-obtain-refresh-token">6. Authorize your Device</a></li>
    
  
    
    <li><a href="#/7-talk-to-alexa">7. Talk to Alexa</a></li>
    
  
    
    <li><a href="#/9-Modify-your-AFML">8. Customize your Renderer</a></li>
    
  
    
    <li><a href="#/8-Add-visuals">9. Change your Home Screen</a></li>
    
  
  
</ul>
</nav>

<section id="content"><a class="control hide">Hide all</a><a class="control show">Show all</a>

  <article class="active">
    <a name="/1-setup-your-pi" ><h2>1. Setup Your Pi</h2></a>
    <section class="body" style="display: block;">	
      <p><strong>Note:  you can skip this step if your Pi is already up and running.</strong></p>

<p>Let’s begin by setting up the Pi. The Raspberry Pi 3 board includes -</p>

<ul>
  <li>4 USB ports</li>
  <li>HDMI port for video output (you’ll be using this to connect to your HDMI monitor)</li>
  <li>3.5mm audio jack for sound output (you’ll be using to connect your earphones)</li>
  <li>Micro SD card slot</li>
  <li>Ethernet port</li>
</ul>

<h3 class="steps" id="assembling-your-pi">Assembling Your Pi</h3>

<ol>
  <li>Check that your micro SD card is inserted into the micro SD card slot on your Pi.</li>
  <li>Plug in the USB microphone and 3.5mm earbuds.</li>
  <li>Connect the keyboard and mouse to the USB ports.</li>
  <li>Connect your monitor using the HDMI port.</li>
  <li>Insert ethernet cable into the Pi.  (not shown in this picture)</li>
</ol>

<p><img src="./Alexa Skill development workshop/AVST-ClosePiSetup.jpg" alt="Pi_setup"></p>

<h3 class="steps" id="booting-your-pi">Booting Your Pi</h3>

<ol>
  <li>Plug in the power supply to the micro USB connector on the Pi.  You should see a loading screen go through some startup steps before booting to desktop - if you run into any errors, request a new SD micro card to boot the OS from.</li>
  <li>Verify ethernet is working by clicking on the connectivity icon in the top right of the tool bar (next to the speaker icon).  You should see an up/down arrow pair (not X’d out).</li>
  <li>Open a web browser by clicking on the globe icon in the top left toolbar.</li>
</ol>

<h3 class="verify" id="checkpoint-1">Checkpoint 1</h3>
<ol>
  <li>Make sure you’re connected to the internet and are able to navigate to <a href="https://developer.amazon.com/">https://developer.amazon.com</a>.</li>
</ol>

    </section>
  </article>

  <article class="">
    <a name="/2-get-dev-account" href="https://avs-sdk-workshop.github.io/#/2-get-dev-account"><h2>2. Get an Amazon Dev Account</h2></a>
    <section class="body" style="display: none;">	
      <h3 class="steps" id="register-for-an-amazon-developer-account">Register for an Amazon Developer Account</h3>

<p>Unless you already have one, go ahead and create a free developer account at <a href="https://developer.amazon.com/login.html">developer.amazon.com</a>. Click “sign in” at the upper right corner and create your account (or log in with your existing credentials).  You can review the <strong>AVS Terms and Agreements</strong> <a href="https://developer.amazon.com/public/solutions/alexa/alexa-voice-service/support/terms-and-agreements">here</a>.</p>

<p>Note - you can open these links in a new tab - and if you lose track of the lab manual, please let the team know”</p>

<h3 class="verify" id="checkpoint-2">Checkpoint 2</h3>
<ol>
  <li>Once logged in, navigate to <a href="https://developer.amazon.com/avs/home.html#/avs/home">https://developer.amazon.com/avs/home.html#/avs/home</a></li>
</ol>


    </section>
  </article>

  <article class="">
    <a name="/3-create-device-security-profile" ><h2>3. Create a Device &amp; Security Profile</h2></a>
    <section class="body" style="display: none;">	
      <h3 id="register-your-prototype-and-create-a-security-profile">Register your prototype and create a security profile</h3>

<p>After you’ve created an Amazon developer account, you’ll need to create a product and security profile. This will enable your software client to connect to AVS.</p>

<p>Log in to <a href="https://developer.amazon.com/login.html">developer.amazon.com</a>.  You should be in the Dashboard by default - click the <strong>ALEXA VOICE SERVICE</strong> button in the global navigation to start building products with Alexa built-in.  If you don’t see this screen, try this link:  <a href="https://developer.amazon.com/avs/home.html#/avs/homes">https://developer.amazon.com/avs/home.html#/avs/homes</a></p>

<p><img src="./Alexa Skill development workshop/1-devportal-alexa-fixed.png" alt="code"></p>

<p>If this is your first time using AVS, you’ll see a welcome screen. Click the <strong>GET STARTED</strong> button, then click the <strong>CREATE PRODUCT</strong> button.</p>

<p>If you’re a returning developer that has already created products in your dashboard, click the blue <strong>CREATE PRODUCT</strong> button at the top right corner of the screen to start building a new device profile.</p>

<h3 id="fill-in-product-information">Fill in product information</h3>

<ol>
  <li><em>Product Name</em>: Use <strong>AVS Tutorials Project</strong>.</li>
  <li><em>Product ID</em>: Use <strong>PrototypePi.</strong> No spaces are allowed for the <em>Product ID</em> field.</li>
  <li>Select <strong>Device with Alexa built-in</strong> for <em>Please Select Your Product Type</em>.
  Select <strong>No</strong> for <em>Will your device use a companion app?</em></li>
  <li>Choose <strong>Other</strong> for <em>Product Category</em> and write <strong>Prototype</strong> in the <em>(please specify)</em> and <em>Brief product description</em> field.</li>
  <li>Select <strong>Hands-free</strong> for <em>How will users interact with your product?</em></li>
  <li>Skip the <em>Upload an image</em> step.  This is not required for prototyping.</li>
  <li>Select <strong>No</strong> for <em>Do you intend to distribute this product commercially?</em></li>
  <li>Select <strong>No</strong> for <em>Will your device be used for Alexa for Business?</em></li>
  <li>Select <strong>No</strong> for <em>Is this a children’s product or is it otherwise directed to children younger than 13 years old?</em></li>
  <li>Click <strong>NEXT</strong> to continue.</li>
</ol>

<h3 id="set-up-your-security-profile">Set up your security profile</h3>

<ol>
  <li>
    <p>Click <strong>CREATE NEW PROFILE</strong>.</p>
  </li>
  <li>Enter your own custom <strong>Security Profile Name</strong> and <strong>Security Profile Description</strong> for the following fields - or use the below example names:
    <ul>
      <li><em>Security Profile Name</em>: <strong>AVS Tutorials Project</strong></li>
      <li><em>Security Profile Description</em>: <strong>AVS Tutorials</strong></li>
      <li>Click <strong>NEXT</strong>.</li>
    </ul>

    <p><strong>Security Profile ID</strong> will be generated for you.</p>
  </li>
  <li>Select <strong>Other devices and platforms</strong> from the <em>Web - Android/Kindle - iOS - Other devices and platforms</em> options in the <strong>Platform Information</strong> section.</li>
</ol>

<p><img src="./Alexa Skill development workshop/1-otherdevicesplatforms-fixed.png" alt="platforms"></p>

<ul>
  <li>Write a name for your Client ID here - you can just use <strong>Prototype</strong>.</li>
  <li>Click “Generate ID”.  You should get a Client ID and an option to download it.</li>
  <li>If you’re creating this product profile on your Raspberry Pi, click <strong>Download</strong> to get your credentials onto your AVS prototype.  Save the config.json file to your <code class="highlighter-rouge">/home/pi</code> directory.  When you click download, it’ll automatically put it in your /home/pi/downloads folder.</li>
  <li>Check the box beside <em>I agree to the AVS agreement and the AVS Program Requirements.</em>
    <ul>
      <li>Click <strong>FINISH</strong>.</li>
    </ul>
  </li>
</ul>

<p>Congratulations!  You now have access to the Alexa Voice Service APIs.  Click OK on the prompt to continue.  Your device should now be listed on your <a href="https://developer.amazon.com/avs/home.html#/avs/homes">AVS dashboard</a>.</p>

    </section>
  </article>

  <article class="">
    <a name="/5-copy-credentials" ><h2>4. Input Your Credentials</h2></a>
    <section class="body" style="display: none;">	
      <h3 id="download-your-credentials">Download your credentials</h3>

<p>If you didn’t already save it to your Pi when creating your product profile, it’s time to get your <strong>config.json</strong> file onto your client device.  Start by opening a browser and logging into your <a href="https://developer.amazon.com/avs/home.html#/avs/home">AVS dashboard</a>. Click on your Product Name, it should be <strong>AVS Tutorials Project</strong> or whatever you named it when creating the product profile.</p>

<p>If you don’t see your dashboard, click on “My Alexa Consoles” in the upper right corner and select “Alexa Built-in Products”.</p>

<p>This will take you to a product menu - on the left side you should see Product Details.  Select Security Profile below that and choose <strong>Other devices and platforms</strong> from the <em>Web - Android/Kindle - iOS - Other devices and platforms</em> menu.</p>

<p>When you click the <strong>Download</strong> button on your Security Profile in your web browser, you’ll see a <strong>config.json</strong> file appear in your home/pi/downloads folder.  In the file manager, copy this file from the /downloads folder and place it in your home/pi folder as shown in the picture below.</p>

<p><img src="./Alexa Skill development workshop/downloadConfig_large.png" alt="config"></p>

<p>Now that your Raspberry Pi has your own <strong>unique credentials</strong> loaded on it, it’s time to build your SDK.</p>

    </section>
  </article>

  <article class="">
    <a name="/6-run-install-script" ><h2>5. Run the Install Script</h2></a>
    <section class="body" style="display: none;">	
      <h3 id="run-the-install-script">Run the Install Script</h3>

<p>You are now ready to run the install script. This will install all dependencies, including the <strong>Wake Word Engine</strong> (WWE) from Sensory.  The WWE compares incoming audio to an onboard model of a wake word (<strong>“Alexa”</strong>) and will initiate the transmission of audio to the cloud when triggered.  Note that this WWE is provided for <strong>prototyping purposes only</strong> and would need to be licensed for a commercial device.  The AVS Device SDK is modular and flexible. When you’re ready to build your product, you can choose any WWE you prefer. Remember that for AVS products, the wake word must be <strong>Alexa</strong> so that your customers aren’t confused about how to interact with your device.</p>

<p>To run the install script, open a <strong>terminal</strong> by clicking on the console window in the Pi’s toolbar in the upper-left corner of the screen (or just use your existing terminal window). You should see a <strong>setup.sh</strong> script in your <em>/home/pi/</em> directory. This pulls the credentials from your <strong>config.json</strong> file to run the install script. To launch the setup script, copy and paste the following command into your terminal window and hit return:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /home/pi/
sudo bash setup.sh config.json -m /home/pi/Smart-screen-sdk-test/
</code></pre></div></div>

<p><img src="./Alexa Skill development workshop/configTerm.png" alt="run_script"></p>

<p>Type <strong>“AGREE”</strong> when it prompts you to accept the licensing terms from our third-party libraries.  Unless, of course, you disagree!</p>

<p>This will kick off the installation process which could normally take over 20 minutes, but for reInvent we’ve precompiled the image to save you some time.</p>

<p>Once you’ve finished compiling, you should see a success screen.  If your device freezes up - don’t worry, just restart by unplugging your Pi’s power cord.  When you get back to your desktop, re-run the above setup.sh command to finish your install.</p>

<p>Now you just need to launch the sample app and get a refresh token from AVS so your device can authenticate with the cloud via Login With Amazon (LWA).</p>


    </section>
  </article>

  <article class="">
    <a name="/6-obtain-refresh-token"><h2>6. Authorize your Device</h2></a>
    <section class="body" style="display: none;">	
      <p>When you run the sample app for the first time, you’ll need to authorize your client for access to AVS.</p>

<p>Initialize the sample app by pasting or typing the following command into your terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /home/pi/
sudo bash startsample.sh
</code></pre></div></div>

<p>Wait for the sample app to display a message like the one in the picture below (but, a different code of course) -  If you don’t see this, but you see “waiting for authorization” messages going by, then scroll up!  It’s easy to miss the authorization code since the terminal window fills up pretty fast.  Note - you need to leave this process running while you authorize, don’t close the window or otherwise stop the startsample script.</p>

<p><img src="./Alexa Skill development workshop/code_circle.png" alt="code"></p>

<ol>
  <li>Use a browser to navigate to <a href="https://amazon.com/us/code">amazon.com/us/code</a></li>
  <li>Authenticate using your Amazon user credentials.  If you aren’t able to log in - try deleting all cookies or open a new tab in “guest mode” browser, then go to <a href="https://amazon.com/us/code">amazon.com/us/code</a>.  You can also just go to the link from your phone, laptop, or any connected device, and it should work.</li>
  <li>Enter the code specified in the message from sample app.</li>
  <li>Select “Allow”.</li>
  <li>Wait (it may take as long as 30 seconds) for CBLAuthDelegate to successfully get an access and refresh token from Login With Amazon (LWA).</li>
  <li>At this point the sample app will print a message informing you that you are now authorized!</li>
</ol>

<p>Your raspberry pi is now ready to use the sample app. The next time you start the sample app, you will not need to go through the authorization process.</p>

<p>Now, you’ll need to open a browser to add a visual interface to your prototype.  Open a new chromium tab to the following URL: 
<code class="highlighter-rouge">file:///home/pi/avs-device-sdk/GUI/js/dist/index.html?insecure=1</code></p>

<p>Note, this should autocomplete in your browser when you start typing - it’s also in the bookmarks as “Alexa Home Screen”.</p>

<p>Congrats on your progress so far!  Now it’s time to talk with Alexa.</p>


    </section>
  </article>

  <article class="">
    <a name="/7-talk-to-alexa" ><h2>7. Talk to Alexa</h2></a>
    <section class="body" style="display: none;">	
      <h3 class="steps" id="interact-with-your-prototype">Interact with Your Prototype</h3>

<p>Say “Alexa” into the microphone on your Raspberry Pi to trigger the <strong>Wake Word Engine</strong>.  Since you are using a single microphone in a noisy environment, you may want to speak closely into your microphone to ensure your voice is heard clearly.  You should see a blue light on the bottom of your screen, indicating the wake word was recognized.  Then say “tell me a joke.” If Alexa responds, congratulations!  You have a working prototype.</p>

<p>If you cannot hear Alexa’s response, ensure your speaker/earbuds are turned on and plugged in to your Raspberry Pi’s 3.5mm audio jack.  Check that your audio output on your Pi is set to <strong>Analog</strong> by right-clicking on the speaker icon in the top right corner of the screen.</p>

<p>Try the following interactions, and note how the screen allows for Alexa to provide information-rich interactions -</p>

<ul>
  <li>
    <p>Say “Alexa”, then ask “What’s the weather in Las Vegas?”  Note how instead of just hearing today’s weather over the speaker, you also get a 5 day forecast visually as a bonus!</p>
  </li>
  <li>
    <p>Say “Alexa”, then say “Play Katy Perry on TuneIn.”  You get album art and transport controls (try clicking “next”!)</p>
  </li>
  <li>
    <p>Say “Alexa”, then say “Add Milk, Eggs, Bread and Orange Juice to my shopping list.”  You get a visual confirmation of how your list is shaping up, and if you fill up your list you can browse by using the scroll wheel (or if you had a touchscreen, a swipe)</p>
  </li>
  <li>
    <p>Say “Alexa”, then say “Who is Angela Merkel?”  Wikipedia provides a nice picture for your screen and some extra stats.  A picture is worth a thousand words!</p>
  </li>
</ul>

<h3 id="try-a-multi-turn-interaction">Try a Multi-Turn interaction</h3>

<ul>
  <li>Say “Alexa”, then ask “Set an alarm for 12:30”.  You should receive a response asking you to clarify AM or PM.  Respond to the question with “Afternoon”.  If you have DEBUG9 active, scroll up until you see <strong>Listening…</strong> - right above that you’ll see that the state of the <strong>Audio Input Processor</strong> (AIP) has changed from <code class="highlighter-rouge">IDLE</code> to <code class="highlighter-rouge">EXPECTING_SPEECH</code> and then <code class="highlighter-rouge">RECOGNIZING</code> - without you speaking the wake word!  Typically, the AIP is triggered by the <strong>Wake Word Engine</strong> running on the client - but in this case, it’s been activated via a <strong>Directive</strong> delivered down to your client from the cloud.</li>
</ul>

<p><img src="./Alexa Skill development workshop/AIP_Multi.png" alt="AIP_multiturn"></p>

<p>Multi-turn interactions can feel like a more natural method of communication, since you can continue to speak with Alexa as part of a continuing conversation without starting every phrase with “Alexa”.</p>

<h3 id="other-interactions-to-try">Other interactions to Try</h3>

<ul>
  <li>Say “Alexa, Wikipedia” - you’ll have the option of looking up any subject without having to speak the wake word before the subject.</li>
  <li>Say “Alexa, let’s chat” to initiate a conversation with a chat bot!</li>
  <li>Say “Alexa, play Yes Sire” to play a medieval-themed game using your voice.</li>
</ul>

    </section>
  </article>

  <article class="">
    <a name="/9-Modify-your-AFML" ><h2>8. Customize your Renderer</h2></a>
    <section class="body" style="display: none;">	
      <p>Depending on the size of your screen or how your device is used, you might want to make changes in your screen’s display behavior.  Navigate to the following folder in your File Manager: <code class="highlighter-rouge">/home/pi/avs-device-sdk/GUI/js/src/components</code></p>

<p>Right click on the file <strong>apmlRenderer.tsx</strong> and open it with a text editor.</p>

<p><img src="./Alexa Skill development workshop/renderChange.png" alt="code"></p>

<p>Scroll down to where you see <code class="highlighter-rouge">Theme:ColorScheme.LIGHT</code> and change it to <code class="highlighter-rouge">Theme:ColorScheme.DARK</code> - then save and close.</p>

<p>If you aren’t able to save, it may be an ownership issue, you can type the following into the terminal to fix it:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo chown -R pi:pi /home/pi
</code></pre></div></div>

<p>You will need to rebuild the GUI/js</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /home/pi/avs-device-sdk/GUI/js/src/
npm run-script build
</code></pre></div></div>

<p>Now, refresh your browser and ask for the weather again!  It should look different - better for low-light environments.</p>

<p>You can also try modifying the shape or screen size and see how the Smart Screen SDK makes it easy to optimize for your unique product capabilities.</p>


    </section>
  </article>

  <article class="">
    <a name="/8-Add-visuals" ><h2>9. Change your Home Screen</h2></a>
    <section class="body" style="display: none;">	
      <h3 id="modify-your-home-screen">Modify your home screen</h3>

<p>When you ship your screen-based product with Alexa built-in, you’ll probably want your own home screen to display when the device isn’t in use.  For example, if you were building Alexa into your smart thermostat, you could display a control screen that showed your own data when the customer wasn’t asking Alexa a question.  The Alexa for Smart Screen and TV SDK makes it easy to customize your device behavior.</p>

<p>In your File Manager, navigate to <code class="highlighter-rouge">/home/pi/avs-device-sdk/GUI/js/src/lib/data</code>  Right click on the <strong>Home.json</strong> file and select open with Text Editor to modify the file as shown in the below picture.</p>

<p><img src="./Alexa Skill development workshop/homejson.png" alt="config"></p>

<p>Here, you can input any URL to replace your home screen with.  Make your own, or try the following as an example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://i.imgur.com/orvck3S.png
</code></pre></div></div>

<p>Save and close the file.  If you aren’t able to save, it may be an ownership issue, you can type the following into the terminal to fix it:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo chown -R pi:pi /home/pi
</code></pre></div></div>

<p>You will need to rebuild the GUI/js</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /home/pi/avs-device-sdk/GUI/js/src/
npm run-script build
</code></pre></div></div>

<p>When you’re ready, you don’t need to re-compile the SDK or restart the sample app, just refresh your browser in Chromium after the build.  You should see your own custom home screen image when you aren’t interacting with Alexa!</p>

<p>Feel free to poke around in the Home.json file and see what other changes you can make to improve the customer experience on your device.</p>

    </section>
  </article>

</section>


  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script src="./Alexa Skill development workshop/assets.js" type="text/javascript"></script>
  <script>require('boot');</script>


</body></html>